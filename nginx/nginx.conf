# Визначаємо серверний блок (server block), який відповідає за обробку HTTP-запитів
server {
    # Налаштовуємо прослуховування на порту 80
    listen 80;
    # Налаштовуємо обробку запитів для кореневого маршруту "/"
    location / {
        # Передаємо запити до бекенд-сервера Django який працює на порту 8000
        proxy_pass http://web:8000;
        # Встановлюємо заголовок Host, щоб він відповідав початковому доменному імені, яке надіслав клієнт
        proxy_set_header Host $host;
        # Встановлюємо заголовок X-Real-IP, щоб передати реальну IP-адресу клієнта
        proxy_set_header X-Real-IP $remote_addr;
        # Встановлюємо заголовок X-Forwarded-For, щоб передати IP-адресу клієнта та IP-адреси проміжних проксі-серверів
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

